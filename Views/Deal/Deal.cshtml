@model DealViewModel
@{
    ViewData["Title"] = "Deal";

}

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>$("#dealActive").addClass("active")</script>


<link href="~/metronic/components-rounded-rtl.min.css" rel="stylesheet" />
<div class="container-fluid">
    <div class="col-md-12 ">
        <div class="card">
            <div class="card-content collapse show">
                <div class="card-body">
                    <div class="bs-callout-warning callout-border-right callout-bordered callout-transparent mt-1 p-1">
                        <div class="text-center">
                            <h2 class="warning">د کهاتو فورم</h2>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <hr />
    </div>

    <div class="row">
        <div class="col-md-12 " style="margin:0px;" id="customercard">

            <div class="card">
                <div class="card-header ">
                    <h4 class="card-title "><strong>د مشتریانو لېست</strong></h4>
                    <hr />
                    <a class="heading-elements-toggle">
                        <i class="fa fa-ellipsis-v font-medium-3"></i>
                    </a>
                    <div class="heading-elements">
                        <ul class="list-inline mb-0">
                            <li><a data-action="expand"><i class="ft-maximize"></i></a></li>

                        </ul>
                    </div>
                </div>

                <table class="table table-responsive-md table-striped table-condensed  table-bordered dataTables_scrollHead" id="tbl">
                    <thead class="scrollable-container ps--scrolling-x ">
                        <tr role="row">
                            <th class="col-md-3">د کهاته دار نوم</th>
                            <th class="col-md-2">پته</th>
                            <th class="col-md-1"> مبائیل</th>
                            <th class="col-md-3">  پرېښنالیک</th>
                            <th class="col-md-1">  د کهاته دار ډول</th>
                            <th class="col-md-1">  انتخابول</th>
                        </tr>
                    </thead>

                    <tbody></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-12 d-none" style="margin:0px; height:100%" id="dealcard">

            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="horz-layout-colored-controls"><strong>د انتخاب شوي مشتري معلومات</strong></h3>
                            <a class="heading-elements-toggle"><i class="fa fa-ellipsis-v font-medium-3"></i></a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                    <li><a data-action="expand"><i class="ft-maximize"></i></a></li>

                                </ul>
                            </div>
                        </div>
                        <div class="card-content collpase show">
                            <div class="card-body">

                                <form class="form form-horizontal">
                                    <div class="form-body">
                                        <h4 class="form-section"><i class="fa fa-eye"></i> د مشتري معلومات</h4>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <input type="hidden" id="dealerid" />
                                                <div class="form-group row">
                                                    <label class="col-md-3 label-control text-bold-700" for="userinput1">مشتري</label>
                                                    <div class="col-md-9">
                                                        <input type="text" disabled id="userinput1" class="form-control border-primary" placeholder="د مشتري نوم..." name="firstname">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-md-3 label-control text-bold-700" for="userinput2">پته:</label>
                                                    <div class="col-md-9">
                                                        <input type="text" disabled id="userinput2" class="form-control border-primary" placeholder="د مشتري پته..." name="lastname">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-md-3 label-control text-bold-700" for="userinput3">شمېره:</label>
                                                    <div class="col-md-9">
                                                        <input type="text" disabled id="userinput3" class="form-control border-primary" placeholder="تېلفون شمېره..." name="username">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-md-3 label-control text-bold-700 " for="userinput4">بریښنالیک:</label>
                                                    <div class="col-md-9">
                                                        <input type="text" disabled id="userinput4" class="form-control border-primary" placeholder="برېښنالیک... " name="nickname">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-md-3 label-control text-bold-700 " for="dealertype">د کهاته دار ډول:</label>
                                                    <div class="col-md-9">
                                                        <input type="text" disabled id="dealertype" class="form-control border-primary" placeholder="د کهاته دار ډول... " name="nickname">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9 ">
                                                        <button type="button" id="btnlist" onclick="backToList()" class="btn btn-outline-info"><i class="ft-user-plus"></i>&nbsp; مشتریانو لېست</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <hr />
                                @* ///////////  Tabs ///////////// *@
                                <div class="col-xl-12 col-md-12 col-lg-12 p-0 m-0">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title" style="text-align:center"><label class="font-medium-4" style="font-size:x-large">د کهاتو تفصیل</label></h3>
                                        </div>
                                        <div class="card-content">
                                            <div class="card-body">
                                                <ul class="nav nav-tabs nav-justified nav-top-border no-hover-bg nav-justified">
                                                    <li class="nav-item">
                                                        <a class="nav-link   " id="active-tab1" data-toggle="tab" href="#active1" aria-controls="active1" aria-expanded="true"><label style="font-size:large">افغانیو کهاته</label></a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="link-tab1" data-toggle="tab" href="#link1" aria-controls="link1" aria-expanded="false"><label style="font-size:large">کلدارو کهاته</label></a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="linkOpt-tab1" data-toggle="tab" href="#linkOpt1" aria-controls="linkOpt1"><label style="font-size:large"> ډالرو کهاته </label></a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link active " id="linkOpt-tab2" data-toggle="tab" href="#linkOpt2" aria-controls="linkOpt1"><label style="font-size:large"> مجموعه کهاته </label></a>
                                                    </li>
                                                </ul>
                                                <div class="tab-content pt-1">
                                                    <div role="tabpanel" class="tab-pane" id="active1" aria-labelledby="active-tab1" aria-expanded="true">
                                                        <div class="col-md-2">
                                                            <button type="button" onclick="afghaniDeal()" class="btn btn-info   mr-1" data-toggle="modal" data-target="#bootstrap"><i class="ft-plus-circle "></i>&nbsp; نوی کهاته</button>
                                                        </div>
                                                        <table class="table  table-striped table-condensed table-bordered dataTables_scrollHead " id="afghaniTable">
                                                            <thead class="scrollable-container ps--scrolling-x">
                                                                <tr role="row">
                                                                    <th class="col-md-2">مشتري</th>
                                                                    <th class="col-md-2">تیلفون شماره</th>
                                                                    <th class="col-md-1">قرضه</th>
                                                                    <th class="col-md-1">تادیه شوی</th>
                                                                    <th class="col-md-2">تفصیل</th>
                                                                    <th class="col-md-2">اجراء کوونکی</th>
                                                                    <th class="col-md-2">نیټه</th>
                                                                </tr>
                                                            </thead>

                                                            <tbody></tbody>

                                                        </table>

                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">

                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>قرضه</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="afghaniDebit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>تادیه شوی </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="afghaniCredit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>باقي</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="afghaniRemain">1000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane" id="link1" role="tabpanel" aria-labelledby="link-tab1" aria-expanded="true">

                                                        <div class="col-md-2">
                                                            <button type="button" onclick="rupeDeal()" class="btn btn-info " data-toggle="modal" data-target="#bootstrap"><i class="ft-plus-circle"></i>&nbsp; نوی کهاته</button>
                                                        </div>
                                                        @* //////////////  Rupe Data Table/////// *@
                                                        <table class="table  table-striped table-condensed table-bordered dataTables_scrollHead" id="rupeTable">
                                                            <thead class="scrollable-container ps--scrolling-x">
                                                                <tr role="row">
                                                                    <th class="col-md-2">مشتري</th>
                                                                    <th class="col-md-2">تیلفون شماره</th>
                                                                    <th class="col-md-1">قرضه</th>
                                                                    <th class="col-md-1">تادیه شوی</th>
                                                                    <th class="col-md-2">تفصیل</th>
                                                                    <th class="col-md-2">اجراء کوونکی</th>
                                                                    <th class="col-md-2">نیټه</th>
                                                                </tr>
                                                            </thead>

                                                            <tbody></tbody>

                                                        </table>

                                                        @* ////////////////////////////// *@
                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">
                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>قرضه</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="rupeDebit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>تادیه شوی </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="rupeCredit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>باقي</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="rupeRemain">1000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="tab-pane" id="linkOpt1" role="tabpanel" aria-labelledby="linkOpt-tab1" aria-expanded="false">
                                                        <div class="col-md-2">
                                                            <button type="button" onclick="dollerDeal()" class="btn btn-info   mr-1" data-toggle="modal" data-target="#bootstrap"><i class="ft-plus-circle"></i>&nbsp; نوی کهاته</button>
                                                        </div>
                                                        @* /////////////// Doller DataTable ////////// *@
                                                        <table class="table  table-striped table-condensed table-bordered dataTables_scrollHead" id="dollerTable">
                                                            <thead class="scrollable-container ps--scrolling-x">
                                                                <tr role="row">
                                                                    <th class="col-md-2">مشتري</th>
                                                                    <th class="col-md-2">تیلفون شماره</th>
                                                                    <th class="col-md-1">قرضه</th>
                                                                    <th class="col-md-1">تادیه شوی</th>
                                                                    <th class="col-md-2">تفصیل</th>
                                                                    <th class="col-md-2">اجراء کوونکی</th>
                                                                    <th class="col-md-2">نیټه</th>
                                                                </tr>
                                                            </thead>

                                                            <tbody></tbody>

                                                        </table>

                                                        @* /////////////////////////////// ////////// *@

                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">
                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>قرضه</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="dollerDebit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>تادیه شوی </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="dollerCredit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>باقي</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="dollerRemain">1000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane in active" id="linkOpt2" role="tabpanel" aria-labelledby="linkOpt-tab1" aria-expanded="false">
                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">
                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>باقي افغانۍ</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="totalAfghani">5000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>باقي کلدارې </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="totalRupe">6000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>باقي ډالر</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="totalDoller">10000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                @*  //////// End Tabs // *@

                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

    </div>
</div>



@*  /////////////  Modal  /////////////// *@
<!-- Modal -->
<div class="modal fade text-left" id="bootstrap" tabindex="-1" role="dialog" aria-labelledby="myModalLabel35"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="myModalLabel35"> Modal Title</h3>

            </div>
            <form data-ajax="true" data-ajax-url="/Deal/NewDeal" data-ajax-success="frmSuccess(data)" data-ajax-method="post" id="frmCustomerReg">
                @*<input type="hidden" name="CustomerID" id="customeridfordeal" />
                    <input type="hidden" name="CurrencyID" id="currencyid" />*@
                <input hidden asp-for="CurrencyID" />
                <input hidden asp-for="DealerID" />

                <div class="modal-body">
                    <fieldset class="form-group floating-label-form-group">
                        <label for="total">مجموعه قرضه</label>
                        <input type="text" disabled class="form-control" id="txtTotalDebit" placeholder="مجموعه قرضه">
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <div class="form-group">
                            <label asp-for="Debit" class=""></label>
                            <input asp-for="Debit" onkeyup="debitMode()" dir="rtl" placeholder="ورکړل شوی قرضه داخل کړۍ!" class="form-control" />
                            <span asp-validation-for="Debit" class="text-danger"></span>
                        </div>
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <div class="form-group">
                            <label asp-for="Credit" class=""></label>
                            <input asp-for="Credit" onkeyup="creditMode()" dir="rtl" placeholder="تادیه شوی قرضه داخل کړئ!" class="form-control" />
                            <span asp-validation-for="Credit" class="text-danger"></span>
                        </div>
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <label for="total">پاتې قرضه:</label>
                        <input type="text" disabled class="form-control" id="txtRemainDebit" placeholder="پاتې قرضه">
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <label for="total">د کهاتې تفصیل:</label>
                        <input asp-for="Detail" dir="rtl" placeholder="د کهاتې په اړه معلومات ولیکئ!" class="form-control" />
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <input type="reset" class="btn btn-outline-secondary btn-lg" data-dismiss="modal" value="بندول">
                    <input type="submit" class="btn btn-outline-primary btn-lg" value="ذخیره">
                </div>
            </form>
        </div>
    </div>
</div>
<div class="d-none">
    <form data-ajax="true" data-ajax-url="/Deal/GetAllDeals" data-ajax-success="loadSingleDealerDeal(data)" data-ajax-method="post" id="">
        <input type="hidden" name="DealerID" id="idForReload" value="" />
        <button type="submit" class="btn btn-primary" id="btnReloadDeals"></button>
    </form>
</div>

@* ///////////////////////////////// *@
@section Scripts{
    @await Html.PartialAsync("_ValidationScriptsPartial")
}
<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
    $(document).ready(function () {
        LoadCustomers();

    })
    function LoadCustomers() {
        var show = true;
        $.ajax({
            url: '/Deal/FetchDealers/',
            type: 'GET',
            contentType: "application/json",
            datatype: "JSON",
            success: function (customers) {
                var tr = "";


                $.each(customers, function (i, col) {



                    tr += ' <tr>';
                    tr += '      <td class="col-md-3"> ' + col.name + ' </td>';
                    tr += '      <td class="col-md-2"> ' + col.province + ' </td>';
                    tr += '     <td  class="col-md-2"> ' + col.phone + '</td>';
                    tr += '     <td  class="col-md-3">' + col.email + '  </td>';
                    tr += '     <td  class="col-md-3">' + col.dealertype + '  </td>';
                    tr += ' <td  class="col-md-2">  <form data-ajax="true" data-ajax-url="/Deal/GetAllDeals" data-ajax-success="loadSingleDealerDeal(data)" data-ajax-method="post" ><input type="hidden" name="DealerID" value="' + col.dealerid + '" /><button type="submit" class="btn btn-primary" onclick="passValue(' + col.dealerid + ',\'' + col.name + '\',\'' + col.phone + '\',\'' + col.email + '\',\'' + col.province + '\',\'' + col.dealertype + '\')" ><i" class="ft-info" ></i></button> </form> </td>';
                    tr += ' </tr>';
                });



                $("#tbl>tbody").html("").html(tr);
                if (show) {
                    show = false;
                    $("#tbl").DataTable({

                        scrollY: "400px",
                        scrollX: true,

                        columnDefs: [{
                            width: 180,
                            targets: 0,
                        }, {
                            width: 250,
                            targets: 3,
                        }, {
                            width: 150,
                            targets: 2,
                        }],
                        stateSave: true,

                        "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "ټول"]],
                        "pageLength": 5,
                        "language": {
                            "emptyTable": "په جدول کې معلومات شتون نه لري",
                            "info": "د <b>( _START_  )</b> تر <b>( _END_  )</b> د <b>( _TOTAL_ )</b> ریکاروډونو څخه.",
                            "infoFiltered": "( <b>( _MAX_ )</b> ریکارډونه شتون لرې )",
                            "infoPostFix": "",

                            "lengthMenu": "ښودل_MENU_ ریکارډونو",
                            "search": "پلټنه<span id='tblSearch' class='fa fa-search'></span> ",
                            "searchPlaceholder": "پلټنه",
                            "zeroRecords": "پدی نوم هیڅ ریکارډ پیدا نشو ",
                            "paginate": {
                                "first": "لومړۍ پاڼه",
                                "previous": "مخکې",
                                "next": "وروسته",
                                "last": "پای"
                            },
                        },
                        // dom: "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",

                    });
                }
            },
            error: function (err) {
                console.log(err)
            }
        })
    }

    function passValue(dealerid, name, phone, email, province, dealertype) {

        $("#idForReload").val(dealerid);
        $("#dealerid").val(dealerid);

        $("#userinput1").val(name);
        $("#userinput2").val(province);
        $("#userinput3").val(phone);
        $("#userinput4").val(email);
        $("#dealertype").val(dealertype);

        $("#customercard").addClass("d-none");
        $("#dealcard").removeClass("d-none");
    }
    function backToList() {
        $("#customercard").removeClass("d-none");
        $("#dealcard").addClass("d-none");

    }
    function afghaniDeal() {
        $("#DealerID").val($("#dealerid").val());
        $("#CurrencyID").val(1);

        $("#myModalLabel35").text("افغاني کهاته له " + $("#userinput1").val() + " سره");
        $("#txtTotalDebit").val(totalAfghaniDebit);
        $("#txtRemainDebit").val(totalAfghaniDebit);

        //var table = $("#afghaniTable").dataTable();
        //table.fnDestroy();

        //var table = $("#dollerTable").dataTable();
        //table.fnDestroy();

        //var table = $("#rupeTable").dataTable();
        //table.fnDestroy();
    }
    function rupeDeal() {
        $("#DealerID").val($("#dealerid").val());
        $("#CurrencyID").val(2);
        $("#myModalLabel35").text("کلدارو کهاته له " + $("#userinput1").val() + " سره");
        $("#txtTotalDebit").val(totalRupeDebit);
        $("#txtRemainDebit").val(totalRupeDebit);

        //var table = $("#rupeTable").dataTable();
        //table.fnDestroy();

        //var table = $("#dollerTable").dataTable();
        //table.fnDestroy();

        //var table = $("#afghaniTable").dataTable();
        //table.fnDestroy();
    }
    function dollerDeal() {
        $("#DealerID").val($("#dealerid").val());
        $("#CurrencyID").val(3);
        $("#myModalLabel35").text("ډالرو کهاته له " + $("#userinput1").val() + " سره");
        $("#txtTotalDebit").val(totalDollerDebit);
        $("#txtRemainDebit").val(totalDollerDebit)

        //var table = $("#dollerTable").dataTable();
        //table.fnDestroy();

        //var table = $("#afghaniTable").dataTable();
        //table.fnDestroy();

        //var table = $("#rupeTable").dataTable();
        //table.fnDestroy();
    }
    function creditMode() {
        $("#Debit").val(0);
        $("#txtRemainDebit").val($("#txtTotalDebit").val() - $("#Credit").val());
    }
    function debitMode() {
        $("#Credit").val(0);
        var total = parseInt($("#txtTotalDebit").val());
        var debit = parseInt($("#Debit").val());
        var remain = total + debit;
        $("#txtRemainDebit").val(remain);
    }
    function frmSuccess(data) {
        $("#CustmerID").val(0);
        $("#Debit").val("");
        $("#Credit").val("");
        toastr.option
        toastr.success($("#userinput1").val() + data, '', { "progressBar": true, positionClass: 'toast-top-left', containerId: 'toast-top-left' });
        txtTotalDebit
        $("#txtTotalDebit").val($("#txtRemainDebit").val());
        $("#btnReloadDeals").trigger("click");
    }
    var afghaniShow = true;
    var rupeShow = true;
    var dollerShow = true;

    var totalAfghaniDebit = 0;
    var totalRupeDebit = 0;
    var totalDollerDebit = 0;
    function loadSingleDealerDeal(result) {
        //var table = $("#afghaniTable").dataTable();
        //table.fnDestroy();

        //var table = $("#dollerTable").dataTable();
        //table.fnDestroy();

        //var table = $("#rupeTable").dataTable();
        //table.fnDestroy();

        var afghaniDeals = "";
        var rupeDeals = "";
        var dollerDeals = "";

        var allAfghaniCredit = 0;
        var allAfghaniDebit = 0;

        var allRupeCredit = 0;
        var allRupeDebit = 0;

        var allDollerCredit = 0;
        var allDollerDebit = 0;

        $.each(result, function (i, col) {

            if (col.currencyid == 1) {

                var detail = "";
                if (col.detail == null) {
                    detail = "";

                } else {
                    detail = col.detail;

                }

                afghaniDeals += " <tr>";
                afghaniDeals += "      <td> " + col.dealer + " </td>";
                afghaniDeals += "      <td> " + col.phone + " </td>";
                afghaniDeals += "      <td> " + col.debit + " </td>";
                afghaniDeals += "      <td> " + col.credit + " </td>";
                afghaniDeals += "      <td> " + detail + " </td>";
                afghaniDeals += "      <td> " + col.employee + "  </td>";
                afghaniDeals += "     <td>  " + col.date + " </td>";
                afghaniDeals += "      </tr>";
                allAfghaniCredit += col.credit;
                allAfghaniDebit += col.debit;
            }
            if (col.currencyid == 2) {

                var detail = "";
                if (col.detail == null) {
                    detail = "";

                } else {
                    detail = col.detail;

                }

                rupeDeals += " <tr>";
                rupeDeals += "      <td> " + col.dealer + " </td>";
                rupeDeals += "      <td> " + col.phone + " </td>";
                rupeDeals += "      <td> " + col.debit + " </td>";
                rupeDeals += "      <td> " + col.credit + " </td>";
                rupeDeals += "      <td> " + detail + " </td>";
                rupeDeals += "      <td> " + col.employee + "  </td>";
                rupeDeals += "      <td>  " + col.date + " </td>";
                rupeDeals += "      </tr>";
                allRupeCredit += col.credit;
                allRupeDebit += col.debit;
            }
            if (col.currencyid == 3) {

                var detail = "";
                if (col.detail == null) {
                    detail = "";

                } else {
                    detail = col.detail;

                }

                dollerDeals += " <tr>";
                dollerDeals += "      <td> " + col.dealer + " </td>";
                dollerDeals += "      <td> " + col.phone + " </td>";
                dollerDeals += "      <td> " + col.debit + " </td>";
                dollerDeals += "      <td> " + col.credit + " </td>";
                dollerDeals += "      <td> " + detail + " </td>";
                dollerDeals += "      <td> " + col.employee + "  </td>";
                dollerDeals += "      <td>  " + col.date + " </td>";
                dollerDeals += "      </tr>";
                allDollerCredit += col.credit;
                allDollerDebit += col.debit;
            }
        })

        var table = $("#afghaniTable").dataTable();
        table.fnDestroy();

        var table = $("#dollerTable").dataTable();
        table.fnDestroy();

        var table = $("#rupeTable").dataTable();
        table.fnDestroy();

        $("#afghaniTable>tbody").html("").html(afghaniDeals);

        if (true) {
            afghaniShow = false;
            var table = $("#afghaniTable").dataTable({

                stateSave: true,

                dom: 'Blfrtip', buttons: ['excel', 'print', 'copy'],
                "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "ټول"]],
                "pageLength": 5,
                "language": {
                    "emptyTable": "په جدول کې معلومات شتون نه لري",
                    "info": "د <b>( _START_  )</b> تر <b>( _END_  )</b> د <b>( _TOTAL_ )</b> ریکاروډونو څخه.",
                    "infoFiltered": "( <b>( _MAX_ )</b> ریکارډونه شتون لرې )",
                    "infoPostFix": "",

                    "lengthMenu": "ښودل_MENU_ ریکارډونو",
                    "search": "پلټنه<span id='tblSearch' class='fa fa-search'></span> ",
                    "searchPlaceholder": "پلټنه",
                    "zeroRecords": "پدی نوم هیڅ ریکارډ پیدا نشو ",
                    "paginate": {
                        "first": "لومړۍ پاڼه",
                        "previous": "مخکې",
                        "next": "وروسته",
                        "last": "پای"
                    },
                },
                dom: "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",

            });
            $(".buttons-print").text("چاپ")
            $(".buttons-copy").text("کاپي")
            $(".buttons-excel").text("ایکسل")
            $('.buttons-copy, .buttons-print, .buttons-excel').addClass('btn btn-primary ');

            //$(window).on('resize', function () {
            //    table.fnAdjustColumnSizing();
            //});

        }

        $("#rupeTable>tbody").html('').html(rupeDeals);
        if (true) {
            rupeShow = false;
            var table = $("#rupeTable").DataTable({

                stateSave: true,
                //"scrollY": "400px",
                //// "scrollX": true,
                dom: 'Blfrtip', buttons: ['excel', 'print', 'copy'],
                "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "ټول"]],
                "pageLength": 5,
                "language": {
                    "emptyTable": "په جدول کې معلومات شتون نه لري",
                    "info": "د <b>( _START_  )</b> تر <b>( _END_  )</b> د <b>( _TOTAL_ )</b> ریکاروډونو څخه.",
                    "infoFiltered": "( <b>( _MAX_ )</b> ریکارډونه شتون لرې )",
                    "infoPostFix": "",

                    "lengthMenu": "ښودل_MENU_ ریکارډونو",
                    "search": "پلټنه<span id='tblSearch' class='fa fa-search'></span> ",
                    "searchPlaceholder": "پلټنه",
                    "zeroRecords": "پدی نوم هیڅ ریکارډ پیدا نشو ",
                    "paginate": {
                        "first": "لومړۍ پاڼه",
                        "previous": "مخکې",
                        "next": "وروسته",
                        "last": "پای"
                    },
                },

            });
            $(".buttons-print").text("چاپ")
            $(".buttons-copy").text("کاپي")
            $(".buttons-excel").text("ایکسل")
            $('.buttons-copy, .buttons-print, .buttons-excel').addClass('btn btn-primary ');

            //$(window).on('resize', function () {
            //    table.fnAdjustColumnSizing();
            //});
        }
        $("#dollerTable>tbody").html('').html(dollerDeals);
        if (true) {
            dollerShow = false;
            $("#dollerTable").DataTable({

                stateSave: true,
                dom: 'Blfrtip', buttons: ['excel', 'print', 'copy'],
                "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "ټول"]],
                "pageLength": 5,
                "language": {
                    "emptyTable": "په جدول کې معلومات شتون نه لري",
                    "info": "د <b>( _START_  )</b> تر <b>( _END_  )</b> د <b>( _TOTAL_ )</b> ریکاروډونو څخه.",
                    "infoFiltered": "( <b>( _MAX_ )</b> ریکارډونه شتون لرې )",
                    "infoPostFix": "",

                    "lengthMenu": "ښودل_MENU_ ریکارډونو",
                    "search": "پلټنه<span id='tblSearch' class='fa fa-search'></span> ",
                    "searchPlaceholder": "پلټنه",
                    "zeroRecords": "پدی نوم هیڅ ریکارډ پیدا نشو ",
                    "paginate": {
                        "first": "لومړۍ پاڼه",
                        "previous": "مخکې",
                        "next": "وروسته",
                        "last": "پای"
                    },
                },

            });
            $(".buttons-print").text("چاپ")
            $(".buttons-copy").text("کاپي")
            $(".buttons-excel").text("ایکسل")
            $('.buttons-copy, .buttons-print, .buttons-excel').addClass('btn btn-primary ');

            //$(window).on('resize', function () {
            //    table.fnAdjustColumnSizing();
            //});
        }

        $("#afghaniDebit").text(allAfghaniDebit.toFixed(2));
        $("#afghaniCredit").text(allAfghaniCredit.toFixed(2));
        $("#afghaniRemain").text((allAfghaniDebit - allAfghaniCredit).toFixed(2));

        $("#rupeDebit").text(allRupeDebit.toFixed(2));
        $("#rupeCredit").text(allRupeCredit.toFixed(2));
        $("#rupeRemain").text((allRupeDebit - allRupeCredit).toFixed(2));

        $("#dollerDebit").text(allDollerDebit.toFixed(2));
        $("#dollerCredit").text(allDollerCredit.toFixed(2));
        $("#dollerRemain").text((allDollerDebit - allDollerCredit).toFixed(2));

        $("#totalAfghani").text((allAfghaniDebit - allAfghaniCredit).toFixed(2));
        $("#totalRupe").text((allRupeDebit - allRupeCredit).toFixed(2));
        $("#totalDoller").text((allDollerDebit - allDollerCredit).toFixed(2));

        totalAfghaniDebit = (allAfghaniDebit - allAfghaniCredit).toFixed(2);
        totalRupeDebit = (allRupeDebit - allRupeCredit).toFixed(2);
        totalDollerDebit = (allDollerDebit - allDollerCredit).toFixed(2);

        //function dateFormat(d) {
        //    console.log(d);
        //    return ((d.getMonth() + 1) + "").padStart(2, "0")
        //        + "/" + (d.getDate() + "").padStart(2, "0")
        //        + "/" + d.getFullYear();
        //}

    }
</script>
