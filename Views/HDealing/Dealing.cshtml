@model AllViewModel
@{
    ViewData["Title"] = "Deal";

}
<link href="~/metronic/components-rounded-rtl.min.css" rel="stylesheet" />
<div class="container-fluid">
    <div class="col-md-12 ">
        <div class="card">
            <div class="card-content collapse show">
                <div class="card-body">
                    <div class="bs-callout-info callout-border-left callout-bordered callout-transparent mt-1 p-1">
                        <div class="text-center">
                            <h2 class="info">Loan Form</h2>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <hr />
    </div>

    <div class="row">
        <div class="col-md-12 " style="margin:0px;" id="customercard">

            <div class="card">
                <div class="col-lg-12 col-md-12">
                    <div class="card">
                      
                        <div class="card-content collapse show">
                            <div class="card-body">
                                <div class="list-group">
                                    <div class="row">
                                        <div class="col-md-4 float-right">
                                            <a href="#" class=" list-group-item list-group-item-action list-group-item-success" style="height:130%"><strong class="float-left">Afghani:</strong> <strong class="float-right" id="afghani">0</strong></a>
                                        </div>
                                        <div class="col-md-4 float-left">
                                            <a href="#" class=" list-group-item list-group-item-action list-group-item-info" style="height:130%"><strong class="float-left">Rupee:</strong> <strong class="float-right" id="rupe">0</strong></a>
                                        </div>
                                        <div class="col-md-4 float-left">
                                            <a href="#" class=" list-group-item list-group-item-action list-group-item-warning" style="height:130%"><strong class="float-left">Dollar:</strong> <strong class="float-right" id="doller">0</strong></a>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-header ">
                    <h4 class="card-title "><strong>Dealer List </strong></h4>
                    <hr />
                    <a class="heading-elements-toggle">
                        <i class="fa fa-ellipsis-v font-medium-3"></i>
                    </a>
                    <div class="heading-elements">
                        <ul class="list-inline mb-0">
                            <li><a data-action="expand"><i class="ft-maximize"></i></a></li>

                        </ul>
                    </div>
                </div>
                <div class="col-md-3">
                    <button type="button" id="btnAddDealer" class="btn  btn-primary @ViewBag.Insert" data-toggle="modal"
                            data-target="#bootstrap2">
                      Add New Dealer 
                    </button>
                </div>
                <table class="table table-responsive-md table-striped table-condensed  table-bordered dataTables_scrollHead" id="tbl2">
                    <thead class="scrollable-container ps--scrolling-x ">
                        <tr role="row">
                            <th class="col-md-3">Dealer Name</th>
                            <th class="col-md-1"> Phone</th>
                            <th class="col-md-3">Details</th>
                            <th class="col-md-1">Edit</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-12 d-none" style="margin:0px; height:100%" id="dealcard">

            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="horz-layout-colored-controls"><strong>Select Dealer Details</strong></h3>
                            <a class="heading-elements-toggle"><i class="fa fa-ellipsis-v font-medium-3"></i></a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                    <li><a data-action="expand"><i class="ft-maximize"></i></a></li>

                                </ul>
                            </div>
                        </div>
                        <div class="card-content collpase show">
                            <div class="card-body">

                                <form class="form form-horizontal">
                                    <div class="form-body">
                                        <h4 class="form-section"><i class="fa fa-eye"></i> Dealers info</h4>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <input type="hidden" id="dealerid" />
                                                <div class="form-group row">
                                                    <label class="col-md-3 label-control text-bold-700" for="userinput1">Dealer :</label>
                                                    <div class="col-md-9">
                                                        <input type="text" disabled id="userinput1" class="form-control border-primary" placeholder="Dealer name..." name="firstname">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-md-3 label-control text-bold-700" for="userinput2">Phone :</label>
                                                    <div class="col-md-9">
                                                        <input type="text" disabled id="userinput2" class="form-control border-primary" placeholder="Phone number..." name="lastname">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9 ">
                                                        <button type="button" id="btnlist" onclick="backToList()" class="btn btn-outline-info"><i class="ft-user-plus"></i>&nbsp; Dealer List</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <hr />
                                @* ///////////  Tabs ///////////// *@
                                <div class="col-xl-12 col-md-12 col-lg-12 p-0 m-0">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title" style="text-align:center"><label class="font-medium-4" style="font-size:x-large">Deal Details</label></h3>
                                        </div>
                                        <div class="card-content">
                                            <div class="card-body">
                                                <ul class="nav nav-tabs nav-justified nav-top-border no-hover-bg nav-justified">
                                                    <li class="nav-item">
                                                        <a class="nav-link   " id="active-tab1" data-toggle="tab" href="#active1" aria-controls="active1" aria-expanded="true"><label style="font-size:large">Afghani Deal</label></a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="link-tab1" data-toggle="tab" href="#link1" aria-controls="link1" aria-expanded="false"><label style="font-size:large">Rupee Deal</label></a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="linkOpt-tab1" data-toggle="tab" href="#linkOpt1" aria-controls="linkOpt1"><label style="font-size:large"> US Deal </label></a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link active " id="linkOpt-tab2" data-toggle="tab" href="#linkOpt2" aria-controls="linkOpt1"><label style="font-size:large"> Total Deal </label></a>
                                                    </li>
                                                </ul>
                                                <div class="tab-content pt-1">
                                                    <div role="tabpanel" class="tab-pane" id="active1" aria-labelledby="active-tab1" aria-expanded="true">
                                                        <div class="col-md-2">
                                                            <button type="button" onclick="afghaniDeal()" class="btn btn-info   mr-1" data-toggle="modal" data-target="#bootstrap"><i class="ft-plus-circle "></i>&nbsp; New Deal</button>
                                                        </div>
                                                        <table class="table  table-striped table-condensed table-bordered dataTables_scrollHead " id="afghaniTable">
                                                            <thead class="scrollable-container ps--scrolling-x">
                                                                <tr role="row">
                                                                    <th class="col-md-2">Dealer</th>
                                                                    <th class="col-md-2">Phone</th>
                                                                    <th class="col-md-1">Loan</th>
                                                                    <th class="col-md-1">Paid</th>
                                                                    <th class="col-md-2">Details</th>
                                                                    <th class="col-md-2">Paid by</th>
                                                                    <th class="col-md-2">Date</th>
                                                                </tr>
                                                            </thead>

                                                            <tbody></tbody>

                                                        </table>

                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">

                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>Loan</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="afghaniDebit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>Paid </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="afghaniCredit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>Remain</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="afghaniRemain">1000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane" id="link1" role="tabpanel" aria-labelledby="link-tab1" aria-expanded="true">

                                                        <div class="col-md-2">
                                                            <button type="button" onclick="rupeDeal()" class="btn btn-info " data-toggle="modal" data-target="#bootstrap"><i class="ft-plus-circle"></i>&nbsp; New Deal</button>
                                                        </div>
                                                        @* //////////////  Rupe Data Table/////// *@
                                                        <table class="table  table-striped table-condensed table-bordered dataTables_scrollHead" id="rupeTable">
                                                            <thead class="scrollable-container ps--scrolling-x">
                                                                <tr role="row">
                                                                    <th class="col-md-2">Dealer</th>
                                                                    <th class="col-md-2">Phone</th>
                                                                    <th class="col-md-1">Loan</th>
                                                                    <th class="col-md-1">Paid</th>
                                                                    <th class="col-md-2">Details</th>
                                                                    <th class="col-md-2">Paid by</th>
                                                                    <th class="col-md-2">Date</th>
                                                                </tr>
                                                            </thead>

                                                            <tbody></tbody>

                                                        </table>

                                                        @* ////////////////////////////// *@
                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">
                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>Loan</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="rupeDebit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>Paid </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="rupeCredit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>Remain</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="rupeRemain">1000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="tab-pane" id="linkOpt1" role="tabpanel" aria-labelledby="linkOpt-tab1" aria-expanded="false">
                                                        <div class="col-md-2">
                                                            <button type="button" onclick="dollerDeal()" class="btn btn-info   mr-1" data-toggle="modal" data-target="#bootstrap"><i class="ft-plus-circle"></i>&nbsp;  New Deal</button>
                                                        </div>
                                                        @* /////////////// Doller DataTable ////////// *@
                                                        <table class="table  table-striped table-condensed table-bordered dataTables_scrollHead" id="dollerTable">
                                                            <thead class="scrollable-container ps--scrolling-x">
                                                                <tr role="row">
                                                                    <th class="col-md-2">Dealer</th>
                                                                    <th class="col-md-2">Phone</th>
                                                                    <th class="col-md-1">Loan</th>
                                                                    <th class="col-md-1">Paid</th>
                                                                    <th class="col-md-2">Details</th>
                                                                    <th class="col-md-2">Paid by</th>
                                                                    <th class="col-md-2">Date</th>
                                                                </tr>
                                                            </thead>

                                                            <tbody></tbody>

                                                        </table>

                                                        @* /////////////////////////////// ////////// *@

                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">
                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>Loan</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="dollerDebit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>Paid </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="dollerCredit">1000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>Remain</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="dollerRemain">1000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane in active" id="linkOpt2" role="tabpanel" aria-labelledby="linkOpt-tab1" aria-expanded="false">
                                                        <div class="portlet-body">
                                                            <div class="mt-element-step">
                                                                <div class="row step-default">
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong>Af Remain</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="totalAfghani">5000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col ">
                                                                        <div class="mt-step-number bg-white kt-font-dark "><strong>Pk Remain </strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="totalRupe">6000</strong></div>
                                                                    </div>
                                                                    <div class="col-md-4 bg-grey mt-step-col active">
                                                                        <div class="mt-step-number bg-white font-grey"><strong> Us Remain</strong></div>
                                                                        <div class="mt-step-title uppercase font-grey-cascade"><strong id="totalDoller">10000</strong></div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                @*  //////// End Tabs // *@

                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

    </div>
</div>



@*  /////////////  Modal  /////////////// *@
<!-- Modal -->
<div class="modal fade text-left" id="bootstrap" tabindex="-1" role="dialog" aria-labelledby="myModalLabel35"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="myModalLabel35"> Modal Title</h3>

            </div>
            <form data-ajax="true" data-ajax-url="/HDealing/NewDeal" data-ajax-success="frmSuccess(data)" data-ajax-method="post" id="frmCustomerReg">
                @*<input type="hidden" name="CustomerID" id="customeridfordeal" />
                    <input type="hidden" name="CurrencyID" id="currencyid" />*@
                <input hidden asp-for="deal.CurrencyID" />
                <input hidden asp-for="deal.DealerID" />

                <div class="modal-body">
                    <fieldset class="form-group floating-label-form-group">
                        <label for="total"> Total Loan</label>
                        <input type="text" disabled class="form-control" id="txtTotalDebit" placeholder="Total Loan ">
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <div class="form-group">
                            <label asp-for="deal.Debit" class=""></label>
                            <input asp-for="deal.Debit" onkeyup="debitMode()" dir="ltr" placeholder="" class="form-control" />
                            <span asp-validation-for="deal.Debit" class="text-danger"></span>
                        </div>
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <div class="form-group">
                            <label asp-for="deal.Credit" class=""></label>
                            <input asp-for="deal.Credit" onkeyup="creditMode()" dir="ltr" placeholder="" class="form-control" />
                            <span asp-validation-for="deal.Credit" class="text-danger"></span>
                        </div>
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <label for="total"> Remain Loan:</label>
                        <input type="text" disabled class="form-control" id="txtRemainDebit" placeholder=" ">
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <label for="total">Deal Details:</label>
                        <input asp-for="deal.Detail" dir="ltr" placeholder="" class="form-control" />
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <input type="reset" class="btn btn-outline-secondary btn-lg" data-dismiss="modal" value="Close">
                    <input type="submit" class="btn btn-outline-primary btn-lg" id="btnsubmitDealer" value="Save">
                </div>
            </form>
        </div>
    </div>
</div>
<div class="d-none">
    <form data-ajax="true" data-ajax-url="/HDealing/GetAllDeals" data-ajax-success="loadSingleDealerDeal(data)" data-ajax-method="post" id="">
        <input type="hidden" name="DealerID" id="idForReload" value="" />
        <button type="submit" class="btn btn-primary" id="btnReloadDeals"></button>
    </form>
</div>
@*  /////////////////////////  Model qarz hasana dealrt //////////// *@
<div class="modal fade text-left" id="bootstrap2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel35"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="myModalLabel35">  Loan</h3>
            </div>
            <form data-ajax="true" data-ajax-url="/HDealing/NewHdealer" data-ajax-success="HfrmSuccess(data)" data-ajax-method="post" id="HDealingfrm">
                <div class="modal-body">
                    <input hidden asp-for="hdealer.HDealerID" value="0" />
                    <fieldset class="form-group floating-label-form-group">
                        <div class="form-group">
                            <label asp-for="hdealer.HDealer" class=""></label>
                            <input asp-for="hdealer.HDealer" dir="ltr" placeholder="Name " class="form-control" />
                            <span asp-validation-for="hdealer.HDealer" class="text-danger"></span>
                        </div>
                    </fieldset>
                    <fieldset class="form-group floating-label-form-group">
                        <div class="form-group">
                            <label asp-for="hdealer.Mobile" class=""></label>
                            <input asp-for="hdealer.Mobile" dir="ltr" placeholder="Phone " class="form-control" />
                            <span asp-validation-for="hdealer.Mobile" class="text-danger"></span>
                        </div>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <input type="reset" class="btn btn-outline-secondary btn-lg" data-dismiss="modal" id="btnCloseDealCreate" value="Close">
                    <input type="submit" class="btn btn-outline-primary btn-lg" value="Save">
                </div>
            </form>
        </div>
    </div>
</div>
@* ///////////////////////////////// *@
@section Scripts{
    @await Html.PartialAsync("_ValidationScriptsPartial")

    @*<script src="~/lib/jquery/dist/jquery.js"></script>*@
    <script>
        $(document).ready(function () {
            LoadCustomers();
            HasanaLoanReport();
        })
       
        function HasanaLoanReport() {

            $.ajax({
                url: '/HDealing/HasanaLoanReport/',
                type: 'GET',
                contentType: "application/json",
                datatype: "JSON",
                success: function (data) {

                    $("#afghani").text(data.afghaniLoan);
                    $("#rupe").text(data.rupeLoan);
                    $("#doller").text(data.dollerLoan);
                    if (data.afghaniLoan < 0) {
                        $("#afghani").addClass("text-danger");
                    }
                    if (data.afghaniLoan < 0) {
                        $("#rupe").addClass("text-danger");
                    }
                    if (data.afghaniLoan < 0) {
                        $("#doller").addClass("text-danger");
                    }
                },
                error: function (err) {
                    console.log(err)
                }
            })

        }
        function passHDealerInfo(hdealerId, hdealer1, mobile) {
            $("#hdealer_HDealerID").val(hdealerId);
            $("#hdealer_HDealer").val(hdealer1);
            $("#hdealer_Mobile").val(mobile);
            $("#btnsubmitDealer").val("Update");
            //    alert($("#btnsubmitDealer").val());
        }
        function LoadCustomers() {
            var show = true;
            $.ajax({
                url: '/HDealing/FetchHDealers/',
                type: 'GET',
                contentType: "application/json",
                datatype: "JSON",
                success: function (customers) {
                    var tr = "";
                    console.log(customers);
                    $.each(customers, function (i, col) {
                        tr += ' <tr>';
                        tr += '      <td class="col-md-2"> ' + col.dealer1 + ' </td>';
                        tr += '     <td  class="col-md-2"> ' + col.mobile + '</td>';
                        tr += '     <td  class="col-md-2">  <form data-ajax="true" data-ajax-url="/HDealing/GetAllDeals" data-ajax-success="loadSingleDealerDeal(data)" data-ajax-method="post" ><input type="hidden" name="DealerID" value="' + col.dealerId + '" /><button type="submit" class="btn btn-primary" onclick="passValue(' + col.dealerId + ',\'' + col.dealer1 + '\',\'' + col.mobile + '\')" ><i" class="ft-info" ></i></button> </form> </td>';
                        tr += '     <td  class="col-md-2"><button class="btn btn-info" data-toggle="modal"  data-target="#bootstrap2" onclick="passHDealerInfo(' + col.dealerId + ',\'' + col.dealer1 + '\',\'' + col.mobile + '\')"><i class="fa fa-edit"></i></button></td>';
                        //tr += '     <td  class="col-md-2">  </button> </form> </td>';
                        tr += ' </tr>';
                    });
                    var table = $("#tbl2").dataTable();
                    table.fnDestroy();
          
                    $("#tbl2>tbody").html("").html(tr);
                    
                        $("#tbl2").DataTable({

                            stateSave: true,

                            "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "All"]],
                             });
                    
                },
                error: function (err) {
                    console.log(err)
                }
            })
        }
        function passValue(hdealerId, hdealer1, mobile) {

            $("#idForReload").val(hdealerId);
            $("#dealerid").val(hdealerId);

            $("#userinput1").val(hdealer1);
            $("#userinput2").val(mobile);

            $("#customercard").addClass("d-none");
            $("#dealcard").removeClass("d-none");
        }
        function backToList() {
            $("#customercard").removeClass("d-none");
            $("#dealcard").addClass("d-none");

        }
        function afghaniDeal() {
            $("#deal_DealerID").val($("#dealerid").val());
            $("#deal_CurrencyID").val(1);

            $("#myModalLabel35").text("Afghani deal with " + $("#userinput1").val());
            $("#txtTotalDebit").val(totalAfghaniDebit);
            $("#txtRemainDebit").val(totalAfghaniDebit);

        }
        function rupeDeal() {
            $("#deal_DealerID").val($("#dealerid").val());
            $("#deal_CurrencyID").val(2);
            $("#myModalLabel35").text("Rupee deal wiht " + $("#userinput1").val());
            $("#txtTotalDebit").val(totalRupeDebit);
            $("#txtRemainDebit").val(totalRupeDebit);
        }
        function dollerDeal() {
            $("#deal_DealerID").val($("#dealerid").val());
            $("#deal_CurrencyID").val(3);
            $("#myModalLabel35").text("Dollar deal with " + $("#userinput1").val());
            $("#txtTotalDebit").val(totalDollerDebit);
            $("#txtRemainDebit").val(totalDollerDebit);
        }
        function creditMode() {
            $("#deal_Debit").val(0);
            $("#txtRemainDebit").val($("#txtTotalDebit").val() - $("#deal_Credit").val());
        }
        function debitMode() {
            $("#deal_Credit").val(0);
            var total = parseInt($("#txtTotalDebit").val());
            var debit = parseInt($("#deal_Debit").val());
            var remain = total + debit;
            $("#txtRemainDebit").val(remain);
        }
        function frmSuccess(data) {
            $("#CustmerID").val(0);
            $("#deal_Debit").val("");
            $("#deal_Credit").val("");
            toastr.success(data + $("#userinput1").val() , '', { "progressBar": true, positionClass: 'toast-top-right', containerId: 'toast-top-right' });
            //   txtTotalDebit
            $("#txtTotalDebit").val($("#txtRemainDebit").val());
            $("#btnReloadDeals").trigger("click");
        }
        function HfrmSuccess(data) {
            $("#hdealer_HDealerID").val(0);
            $("#hdealer_HDealer").val("");
            $("#hdealer_Mobile").val("");
            $("#btnCloseDealCreate").trigger("click");
            LoadCustomers();
            toastr.success($("#userinput1").val() + data, '', { "progressBar": true, positionClass: 'toast-top-right', containerId: 'toast-top-right' });
        }
        // HDealingfrm
        var afghaniShow = true;
        var rupeShow = true;
        var dollerShow = true;

        var totalAfghaniDebit = 0;
        var totalRupeDebit = 0;
        var totalDollerDebit = 0;
        function loadSingleDealerDeal(result) {
            //  console.log(result);

            var afghaniDeals = "";
            var rupeDeals = "";
            var dollerDeals = "";

            var allAfghaniCredit = 0;
            var allAfghaniDebit = 0;

            var allRupeCredit = 0;
            var allRupeDebit = 0;

            var allDollerCredit = 0;
            var allDollerDebit = 0;

            $.each(result, function (i, col) {

                if (col.currencyid == 1) {

                    var detail = "";
                    if (col.detail == null) {
                        detail = "";

                    } else {
                        detail = col.detail;

                    }

                    afghaniDeals += " <tr>";
                    afghaniDeals += "      <td> " + col.dealer + " </td>";
                    afghaniDeals += "      <td> " + col.phone + " </td>";
                    afghaniDeals += "      <td> " + col.debit + " </td>";
                    afghaniDeals += "      <td> " + col.credit + " </td>";
                    afghaniDeals += "      <td> " + detail + " </td>";
                    afghaniDeals += "      <td> " + col.employee + "  </td>";
                    afghaniDeals += "     <td>  " + col.date + " </td>";
                    afghaniDeals += "      </tr>";
                    allAfghaniCredit += col.credit;
                    allAfghaniDebit += col.debit;
                }
                if (col.currencyid == 2) {

                    var detail = "";
                    if (col.detail == null) {
                        detail = "";

                    } else {
                        detail = col.detail;

                    }

                    rupeDeals += " <tr>";
                    rupeDeals += "      <td> " + col.dealer + " </td>";
                    rupeDeals += "      <td> " + col.phone + " </td>";
                    rupeDeals += "      <td> " + col.debit + " </td>";
                    rupeDeals += "      <td> " + col.credit + " </td>";
                    rupeDeals += "      <td> " + detail + " </td>";
                    rupeDeals += "      <td> " + col.employee + "  </td>";
                    rupeDeals += "      <td>  " + col.date + " </td>";
                    rupeDeals += "      </tr>";
                    allRupeCredit += col.credit;
                    allRupeDebit += col.debit;
                }
                if (col.currencyid == 3) {

                    var detail = "";
                    if (col.detail == null) {
                        detail = "";

                    } else {
                        detail = col.detail;

                    }

                    dollerDeals += " <tr>";
                    dollerDeals += "      <td> " + col.dealer + " </td>";
                    dollerDeals += "      <td> " + col.phone + " </td>";
                    dollerDeals += "      <td> " + col.debit + " </td>";
                    dollerDeals += "      <td> " + col.credit + " </td>";
                    dollerDeals += "      <td> " + detail + " </td>";
                    dollerDeals += "      <td> " + col.employee + "  </td>";
                    dollerDeals += "      <td>  " + col.date + " </td>";
                    dollerDeals += "      </tr>";
                    allDollerCredit += col.credit;
                    allDollerDebit += col.debit;
                }
            })

            var table = $("#afghaniTable").dataTable();
            table.fnDestroy();

            var table = $("#dollerTable").dataTable();
            table.fnDestroy();

            var table = $("#rupeTable").dataTable();
            table.fnDestroy();


            $("#afghaniTable>tbody").html("").html(afghaniDeals);

                var table = $("#afghaniTable").dataTable({

                    stateSave: true,

                    dom: 'Blfrtip', buttons: ['excel', 'print', 'copy'],
                    "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "All"]],
                    "pageLength": 5,
                     });
                $(".buttons-print").text("Print")
                $(".buttons-copy").text("Copy")
                $(".buttons-excel").text("Excel")
                $('.buttons-copy, .buttons-print, .buttons-excel').addClass('btn btn-primary ');

            $("#rupeTable>tbody").html('').html(rupeDeals);
            if (true) {

                var table = $("#rupeTable").DataTable({

                    stateSave: true,
 
                    dom: 'Blfrtip', buttons: ['excel', 'print', 'copy'],
                    "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "All"]],
                      });
                $(".buttons-print").text("Print")
                $(".buttons-copy").text("Copy")
                $(".buttons-excel").text("Excel")
                $('.buttons-copy, .buttons-print, .buttons-excel').addClass('btn btn-primary ');

            }
            $("#dollerTable>tbody").html('').html(dollerDeals);


                $("#dollerTable").DataTable({

                    stateSave: true,
                    dom: 'Blfrtip', buttons: ['excel', 'print', 'copy'],
                    "lengthMenu": [[5, 10, 20, -1], [5, 15, 50, "All"]],
                });
                $(".buttons-print").text("Print")
                $(".buttons-copy").text("Copy")
                $(".buttons-excel").text("Excel")
                $('.buttons-copy, .buttons-print, .buttons-excel').addClass('btn btn-primary ');


            $("#afghaniDebit").text(allAfghaniDebit);
            $("#afghaniCredit").text(allAfghaniCredit);
            $("#afghaniRemain").text(allAfghaniDebit - allAfghaniCredit);

            $("#rupeDebit").text(allRupeDebit);
            $("#rupeCredit").text(allRupeCredit);
            $("#rupeRemain").text(allRupeDebit - allRupeCredit);

            $("#dollerDebit").text(allDollerDebit);
            $("#dollerCredit").text(allDollerCredit);
            $("#dollerRemain").text(allDollerDebit - allDollerCredit);

            $("#totalAfghani").text(allAfghaniDebit - allAfghaniCredit);
            $("#totalRupe").text(allRupeDebit - allRupeCredit);
            $("#totalDoller").text(allDollerDebit - allDollerCredit);

            totalAfghaniDebit = allAfghaniDebit - allAfghaniCredit;
            totalRupeDebit = allRupeDebit - allRupeCredit;
            totalDollerDebit = allDollerDebit - allDollerCredit;


        }
    </script>
}